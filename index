<!doctype html>
<html lang="it" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Invito 18 Lorenzo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400;1,600&amp;family=Great+Vibes&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    
    * {
      font-family: 'Cormorant Garamond', serif;
    }
    
    .script-font {
      font-family: 'Great Vibes', cursive;
    }
    
    .envelope-container {
      perspective: 1000px;
    }
    
    .envelope {
      position: relative;
      width: 280px;
      height: 180px;
      cursor: pointer;
      transform-style: preserve-3d;
      transition: transform 0.3s ease;
    }
    
    .envelope:hover {
      transform: scale(1.02);
    }
    
    .envelope-body {
      position: absolute;
      width: 100%;
      height: 100%;
      background: linear-gradient(145deg, #1a1a1a 0%, #0d0d0d 100%);
      border: 2px solid #d4af37;
      border-radius: 4px;
      box-shadow: 0 10px 40px rgba(212, 175, 55, 0.2);
    }
    
    .envelope-flap {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 50%;
      background: linear-gradient(180deg, #1a1a1a 0%, #0d0d0d 100%);
      border: 2px solid #d4af37;
      border-bottom: none;
      clip-path: polygon(0 0, 50% 100%, 100% 0);
      transform-origin: top center;
      transition: transform 0.6s ease-out;
      z-index: 10;
    }
    
    .envelope.opened .envelope-flap {
      transform: rotateX(180deg);
    }
    
    .envelope-inner {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 50%;
      background: linear-gradient(0deg, #d4af37 0%, #f4d03f 50%, #d4af37 100%);
      clip-path: polygon(0 0, 50% 100%, 100% 0);
      z-index: 5;
    }
    
    .envelope-text {
      position: absolute;
      top: 55%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      z-index: 2;
    }
    
    .gold-shimmer {
      background: linear-gradient(90deg, #d4af37 0%, #f4d03f 25%, #d4af37 50%, #f4d03f 75%, #d4af37 100%);
      background-size: 200% auto;
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: shimmer 3s linear infinite;
    }
    
    @keyframes shimmer {
      0% { background-position: 0% center; }
      100% { background-position: 200% center; }
    }
    
    .menu-container {
      opacity: 0;
      transform: translateY(50px);
      pointer-events: none;
      transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    
    .menu-container.visible {
      opacity: 1;
      transform: translateY(0);
      pointer-events: all;
    }
    
    .menu-item {
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.5s ease;
    }
    
    .menu-item.visible {
      opacity: 1;
      transform: translateY(0);
    }
    
    .menu-button {
      background: linear-gradient(145deg, #1a1a1a 0%, #0d0d0d 100%);
      border: 1px solid #d4af37;
      padding: 16px 40px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .menu-button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.2), transparent);
      transition: left 0.5s ease;
    }
    
    .menu-button:hover::before {
      left: 100%;
    }
    
    .menu-button:hover {
      box-shadow: 0 0 20px rgba(212, 175, 55, 0.4);
      transform: scale(1.02);
    }
    
    .info-panel {
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    
    .info-panel.open {
      max-height: 200px;
      opacity: 1;
    }
    
    .thanks-text {
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.8s ease 0.5s;
    }
    
    .thanks-text.visible {
      opacity: 1;
      transform: translateY(0);
    }
    
    .sparkle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: #d4af37;
      border-radius: 50%;
      animation: sparkle 2s ease-in-out infinite;
    }
    
    @keyframes sparkle {
      0%, 100% { opacity: 0; transform: scale(0); }
      50% { opacity: 1; transform: scale(1); }
    }
    
    .glitter {
      position: fixed;
      width: 8px;
      height: 8px;
      background: #d4af37;
      border-radius: 50%;
      pointer-events: none;
      z-index: 9999;
      box-shadow: 0 0 10px #d4af37, 0 0 20px #f4d03f;
    }
    
    @keyframes glitterFall {
      0% {
        opacity: 1;
        transform: translateY(0) rotate(0deg) scale(1);
      }
      100% {
        opacity: 0;
        transform: translateY(100px) rotate(360deg) scale(0.3);
      }
    }
    
    .decorative-line {
      height: 1px;
      background: linear-gradient(90deg, transparent, #d4af37, transparent);
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full bg-black text-white overflow-auto">
  <div id="app" class="min-h-full w-full flex flex-col items-center justify-center py-16 px-6 relative"><!-- Sparkles -->
   <div class="sparkle" style="top: 8%; left: 10%; animation-delay: 0s;"></div>
   <div class="sparkle" style="top: 15%; right: 12%; animation-delay: 0.5s;"></div>
   <div class="sparkle" style="top: 35%; left: 8%; animation-delay: 1s;"></div>
   <div class="sparkle" style="top: 55%; right: 10%; animation-delay: 1.5s;"></div>
   <div class="sparkle" style="bottom: 25%; left: 15%; animation-delay: 0.3s;"></div>
   <div class="sparkle" style="bottom: 15%; right: 18%; animation-delay: 0.8s;"></div><!-- Envelope Section -->
   <div id="envelope-section" class="envelope-container flex flex-col items-center mb-12">
    <div id="envelope" class="envelope">
     <div class="envelope-body"></div>
     <div class="envelope-inner"></div>
     <div class="envelope-flap"></div>
     <div class="envelope-text">
      <p class="text-xs italic tracking-widest mb-1" style="color: #d4af37;">INVITO</p>
      <p id="envelope-title" class="script-font text-3xl gold-shimmer">18 Lorenzo</p>
     </div>
    </div>
    <p id="click-hint" class="mt-6 text-sm italic tracking-wider" style="color: #d4af37; opacity: 0.7;">~ clicca per aprire ~</p>
   </div><!-- Menu Section -->
   <div id="menu-container" class="menu-container flex flex-col items-center gap-6 w-full max-w-sm">
    <div class="decorative-line w-32 mb-2"></div><!-- Luogo -->
    <div class="menu-item w-full flex flex-col items-center" style="transition-delay: 0.1s;"><button id="luogo-btn" class="menu-button w-full text-center"> <span class="script-font text-2xl gold-shimmer">Luogo</span> </button>
    </div><!-- Data -->
    <div class="menu-item w-full flex flex-col items-center" style="transition-delay: 0.2s;"><button id="data-btn" class="menu-button w-full text-center"> <span class="script-font text-2xl gold-shimmer">Data</span> </button>
     <div id="data-panel" class="info-panel w-full mt-3">
      <div class="text-center py-4 px-6" style="background: linear-gradient(145deg, #1a1a1a 0%, #0d0d0d 100%); border: 1px solid #d4af37;">
       <p id="data-display" class="script-font text-xl" style="color: #d4af37;">23 Gennaio 2026</p>
       <div class="decorative-line w-16 mx-auto my-3"></div>
       <p class="text-sm italic tracking-wider" style="color: #d4af37; opacity: 0.8;">ore</p>
       <p id="ora-display" class="script-font text-xl" style="color: #d4af37;">20:30</p>
      </div>
     </div>
    </div><!-- Dress Code -->
    <div class="menu-item w-full flex flex-col items-center" style="transition-delay: 0.3s;"><button id="dresscode-btn" class="menu-button w-full text-center"> <span class="script-font text-2xl gold-shimmer">Dress Code</span> </button>
     <div id="dresscode-panel" class="info-panel w-full mt-3">
      <div class="text-center py-4 px-6" style="background: linear-gradient(145deg, #1a1a1a 0%, #0d0d0d 100%); border: 1px solid #d4af37;">
       <p class="text-sm italic tracking-wider mb-2" style="color: #d4af37; opacity: 0.8;">Si prega un abbigliamento</p>
       <p id="dresscode-display" class="script-font text-2xl gold-shimmer">Elegante</p>
      </div>
     </div>
    </div>
    <div class="decorative-line w-32 mt-2"></div>
   </div><!-- Thanks Section -->
   <div id="thanks-section" class="thanks-text mt-12 text-center">
    <p id="thanks-display" class="script-font text-4xl gold-shimmer">Grazie</p>
    <div class="mt-4 flex justify-center gap-2"><span style="color: #d4af37;">✦</span> <span style="color: #d4af37;">✦</span> <span style="color: #d4af37;">✦</span>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      nome_festeggiato: 'Lorenzo',
      data_evento: '23 Gennaio 2026',
      ora_evento: '20:30',
      dress_code_text: 'Elegante',
      messaggio_finale: 'Grazie',
      primary_color: '#d4af37',
      secondary_color: '#0d0d0d',
      text_color: '#d4af37',
      accent_color: '#f4d03f',
      bg_color: '#000000'
    };

    let isEnvelopeOpened = false;
    let dataOpen = false;
    let dresscodeOpen = false;

    function onConfigChange(config) {
      const nome = config.nome_festeggiato || defaultConfig.nome_festeggiato;
      const data = config.data_evento || defaultConfig.data_evento;
      const ora = config.ora_evento || defaultConfig.ora_evento;
      const dresscode = config.dress_code_text || defaultConfig.dress_code_text;
      const grazie = config.messaggio_finale || defaultConfig.messaggio_finale;
      
      document.getElementById('envelope-title').textContent = '18 ' + nome;
      document.getElementById('data-display').textContent = data;
      document.getElementById('ora-display').textContent = ora;
      document.getElementById('dresscode-display').textContent = dresscode;
      document.getElementById('thanks-display').textContent = grazie;
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.bg_color || defaultConfig.bg_color,
            set: (value) => {
              config.bg_color = value;
              window.elementSdk.setConfig({ bg_color: value });
            }
          },
          {
            get: () => config.secondary_color || defaultConfig.secondary_color,
            set: (value) => {
              config.secondary_color = value;
              window.elementSdk.setConfig({ secondary_color: value });
            }
          },
          {
            get: () => config.primary_color || defaultConfig.primary_color,
            set: (value) => {
              config.primary_color = value;
              window.elementSdk.setConfig({ primary_color: value });
            }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => config.font_family || 'Great Vibes',
          set: (value) => {
            config.font_family = value;
            window.elementSdk.setConfig({ font_family: value });
          }
        },
        fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ['nome_festeggiato', config.nome_festeggiato || defaultConfig.nome_festeggiato],
        ['data_evento', config.data_evento || defaultConfig.data_evento],
        ['ora_evento', config.ora_evento || defaultConfig.ora_evento],
        ['dress_code_text', config.dress_code_text || defaultConfig.dress_code_text],
        ['messaggio_finale', config.messaggio_finale || defaultConfig.messaggio_finale]
      ]);
    }

    // Initialize SDK
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }

    // Envelope click handler
    document.getElementById('envelope').addEventListener('click', function() {
      if (isEnvelopeOpened) return;
      isEnvelopeOpened = true;
      
      this.classList.add('opened');
      document.getElementById('click-hint').style.opacity = '0';
      
      setTimeout(() => {
        const menuContainer = document.getElementById('menu-container');
        menuContainer.classList.add('visible');
        
        const menuItems = document.querySelectorAll('.menu-item');
        menuItems.forEach((item, index) => {
          setTimeout(() => {
            item.classList.add('visible');
          }, index * 150);
        });
        
        setTimeout(() => {
          document.getElementById('thanks-section').classList.add('visible');
        }, 600);
      }, 400);
    });

    // Luogo button handler
    document.getElementById('luogo-btn').addEventListener('click', function(e) {
      createGlitter(e);
      setTimeout(() => {
        const mapsUrl = 'https://maps.google.com/?q=Villa+Michelangelo,+Città+Sant\'Angelo,+PE,+Italy';
        window.open(mapsUrl, '_blank', 'noopener,noreferrer');
      }, 300);
    });

    // Data panel toggle
    document.getElementById('data-btn').addEventListener('click', function(e) {
      createGlitter(e);
      dataOpen = !dataOpen;
      document.getElementById('data-panel').classList.toggle('open', dataOpen);
    });

    // Dresscode panel toggle
    document.getElementById('dresscode-btn').addEventListener('click', function(e) {
      createGlitter(e);
      dresscodeOpen = !dresscodeOpen;
      document.getElementById('dresscode-panel').classList.toggle('open', dresscodeOpen);
    });
    
    // Function to create glitter effect
    function createGlitter(e) {
      const rect = e.target.closest('.menu-button').getBoundingClientRect();
      const centerX = rect.left + rect.width / 2;
      const centerY = rect.top + rect.height / 2;
      
      for (let i = 0; i < 25; i++) {
        const glitter = document.createElement('div');
        glitter.className = 'glitter';
        
        const angle = (Math.PI * 2 * i) / 25 + (Math.random() * 0.3);
        const velocity = 50 + Math.random() * 80;
        const offsetX = Math.cos(angle) * velocity;
        const offsetY = Math.sin(angle) * velocity;
        
        glitter.style.left = centerX + 'px';
        glitter.style.top = centerY + 'px';
        
        document.body.appendChild(glitter);
        
        glitter.animate([
          { transform: 'translate(0, 0) rotate(0deg) scale(1)', opacity: 1 },
          { transform: `translate(${offsetX}px, ${offsetY}px) rotate(${720 * (Math.random() > 0.5 ? 1 : -1)}deg) scale(0.1)`, opacity: 0 }
        ], {
          duration: 1000 + Math.random() * 500,
          easing: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)'
        });
        
        setTimeout(() => {
          glitter.remove();
        }, 1500);
      }
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9bc3d7ba0232f7c6',t:'MTc2ODEyODUxNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
